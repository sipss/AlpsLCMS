<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clustering — clustering • AlpsLCMS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Clustering — clustering" />
<meta property="og:description" content="clustering is a wrapper of the RAMClustR::ramclustR from RAMClustR
package. It performs a clustering of features with a given sigma for
retention time similarity st and for correlational similarity." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AlpsLCMS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction-to-alpslcms.html">Introduction to AlpsLCMS</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clustering</h1>
    
    <div class="hidden name"><code>clustering.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>clustering</code> is a wrapper of the <a href='https://rdrr.io/pkg/RAMClustR/man/ramclustR.html'>RAMClustR::ramclustR</a> from <code>RAMClustR</code>
package. It performs a clustering of features with a given sigma for
retention time similarity <code>st</code> and for correlational similarity.</p>
    </div>

    <pre class="usage"><span class='fu'>clustering</span>(<span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='https://rdrr.io/pkg/RAMClustR/man/ramclustR.html'>RAMClustR::ramclustR</a></code></p><dl class='dl-horizontal'>
    <dt><code>xcmsObj</code></dt><dd><p>xcmsObject: containing grouped feature data for clustering by ramclustR</p></dd>
    <dt><code>ms</code></dt><dd><p>filepath: optional csv input. Features as columns, rows as samples. Column header mz_rt</p></dd>
    <dt><code>idmsms</code></dt><dd><p>filepath: optional idMSMS / MSe csv data.  same dim and names as ms required</p></dd>
    <dt><code>taglocation</code></dt><dd><p>character: "filepaths" by default, "phenoData[,1]" is another option. referse to xcms slot</p></dd>
    <dt><code>MStag</code></dt><dd><p>character: character string in 'taglocation' to designat MS / MSe files e.g. "01.cdf"</p></dd>
    <dt><code>idMSMStag</code></dt><dd><p>character: character string in 'taglocation' to designat idMSMS / MSe files e.g. "02.cdf"</p></dd>
    <dt><code>featdelim</code></dt><dd><p>character: how feature mz and rt are delimited in csv import column header e.g. ="-"</p></dd>
    <dt><code>timepos</code></dt><dd><p>integer: which position in delimited column header represents the retention time (csv only)</p></dd>
    <dt><code>st</code></dt><dd><p>numeric: sigma t - time similarity decay value</p></dd>
    <dt><code>sr</code></dt><dd><p>numeric: sigma r - correlational similarity decay value</p></dd>
    <dt><code>maxt</code></dt><dd><p>numeric: maximum time difference to calculate retention similarity for - all values beyond this are assigned similarity of zero</p></dd>
    <dt><code>deepSplit</code></dt><dd><p>logical: controls how agressively the HCA tree is cut - see ?cutreeDynamicTree</p></dd>
    <dt><code>blocksize</code></dt><dd><p>integer: number of features (scans?) processed in one block  =1000,</p></dd>
    <dt><code>mult</code></dt><dd><p>numeric: internal value, can be used to influence processing speed/ram usage</p></dd>
    <dt><code>hmax</code></dt><dd><p>numeric: precut the tree at this height, default 0.3 - see ?cutreeDynamicTree</p></dd>
    <dt><code>sampNameCol</code></dt><dd><p>integer: which column from the csv file contains sample names?</p></dd>
    <dt><code>collapse</code></dt><dd><p>logical: reduce feature intensities to spectrum intensities?</p></dd>
    <dt><code>usePheno</code></dt><dd><p>logical: tranfer phenotype data from XCMS object to SpecAbund dataset?</p></dd>
    <dt><code>mspout</code></dt><dd><p>logical: write msp formatted specta to file?</p></dd>
    <dt><code>ExpDes</code></dt><dd><p>either an R object created by R ExpDes object: data used for record keeping and labelling msp spectral output</p></dd>
    <dt><code>normalize</code></dt><dd><p>character: either "none", "TIC", "quantile", or "batch.qc" normalization of feature intensities.  see batch.qc overview in details.</p></dd>
    <dt><code>qc.inj.range</code></dt><dd><p>integer: how many injections around each injection are to be scanned for presence of QC samples when using batch.qc normalization?  A good rule of thumb is between 1 and 3 times the typical injection span between QC injections.  i.e. if you inject QC ever 7 samples, set this to between 7 and 21.  smaller values provide more local precision but make normalization sensitive to individual poor outliers (though these are first removed using the boxplot function outlier detection), while wider values provide less local precision in normalization but better stability to individual peak areas.</p></dd>
    <dt><code>order</code></dt><dd><p>integer vector with length equal to number of injections in xset or csv file</p></dd>
    <dt><code>batch</code></dt><dd><p>integer vector with length equal to number of injections in xset or csv file</p></dd>
    <dt><code>qc</code></dt><dd><p>logical vector with length equal to number of injections in xset or csv file.</p></dd>
    <dt><code>minModuleSize</code></dt><dd><p>integer: how many features must be part of a cluster to be returned? default = 2</p></dd>
    <dt><code>linkage</code></dt><dd><p>character: heirarchical clustering linkage method - see ?hclust</p></dd>
    <dt><code>mzdec</code></dt><dd><p>integer: number of decimal places used in printing m/z values</p></dd>
    <dt><code>cor.method</code></dt><dd><p>character: which correlational method used to calculate 'r' - see ?cor</p></dd>
    <dt><code>rt.only.low.n</code></dt><dd><p>logical: default = TRUE  At low injection numbers, correlational relationships of peak intensities may be unreliable.  by defualt ramclustR will simply ignore the correlational r value and cluster on retention time alone.  if you wish to use correlation with at n &lt; 5, set this value to FALSE.</p></dd>
    <dt><code>fftempdir</code></dt><dd><p>valid path: if there are file size limitations on the default ff pacakge temp directory  - getOptions('fftempdir') - you can change the directory used as the fftempdir with this option.</p></dd>
    <dt><code>replace.zeros</code></dt><dd><p>logincal: TRUE by default.  NA, NaN, and Inf values are replaced with zero, and zero values are sometimes returned from peak peaking.  When TRUE, zero values will be replaced with a small amount of noise, with noise level set based on the detected signal intensities for that feature.</p></dd>
  
</dl></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>hclust object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Main clustering function output - see citation for algorithm description or vignette('RAMClustR') for a walk through.  batch.qc. normalization requires input of three vectors (1) batch (2) order (3) qc.   This is a feature centric normalization approach which adjusts signal intensities first by comparing batch median intensity of each feature (one feature at a time) QC signal intensity to full dataset median to correct for systematic batch effects and then secondly to apply a local QC median vs global median sample correction to correct for run order effects.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Broeckling CD, Afsar FA, Neumann S, Ben-Hur A, Prenni JE. RAMClust: a novel feature clustering method enables spectral-matching-based annotation for metabolomics data. Anal Chem. 2014 Jul 15;86(14):6812-7. doi: 10.1021/ac501530d.  Epub 2014 Jun 26. PubMed PMID: 24927477.</p>
<p>Broeckling CD, Ganna A, Layer M, Brown K, Sutton B, Ingelsson E, Peers G, Prenni JE. Enabling Efficient and Confident Annotation of LC-MS Metabolomics Data through MS1 Spectrum and Time Prediction. Anal Chem. 2016 Sep 20;88(18):9226-34. doi: 10.1021/acs.analchem.6b02479. Epub 2016 Sep 8. PubMed PMID: 7560453.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
    </ul>

    <h2>Author</h2>
    <p>Corey Broeckling</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Luis Fernandez, Francisco Madrid-Gambin, Sergio Oller, Ivan Montoliu Roura.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


