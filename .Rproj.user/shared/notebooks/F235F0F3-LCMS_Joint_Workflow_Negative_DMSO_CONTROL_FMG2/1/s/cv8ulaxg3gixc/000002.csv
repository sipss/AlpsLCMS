"0","output_dir_node3 <- file.path(output_dir, ""03-optimization"")"
"0","fs::dir_create(output_dir_node3)"
"0","setwd(output_dir_node3)"
"2","The working directory was changed to C:/Users/fmadrid/Documents/IBEC/NESTLE/LCMS/HepG2_output/03-optimization inside a notebook chunk. The working directory will be reset when the chunk is finished running. Use the knitr root.dir option in the setup chunk to change the working directory for notebook chunks."
"0","# lcms_peakpicking_optimization <- function (dataset, peakpickingParameters,  opt_path){"
"0","#   "
"0","#   if(is.null(peakpickingParameters)){"
"0","#     resultPeakpicking <- NULL"
"0","#   } else{"
"0","#   filenames <- pData(dataset)$sampleNames"
"0","#   filer <- filenames"
"0","#   "
"0","#   ## Get the spectra"
"0","#   data_subset <- dataset %>% MSnbase::filterFile(file = filenames)"
"0","#   Biobase::fData(data_subset)$centroided <- TRUE"
"0","#   Biobase::fData(data_subset)$peaksCount <- Biobase::fData(data_subset)$originalPeaksCount"
"0","#   print(""Be aware: do not run twice using the same output directory"")"
"0","#   mzR::writeMSData(data_subset, file = filer, outformat = c(""mzxml""), copy = FALSE)"
"0","#   "
"0","#   print(""Saving filtered spectra..."")"
"0","# "
"0","#   samples_op <- fs::dir_ls(opt_path , glob = ""*.mzXML"")"
"0","#   print(""Performing peak detection parameter optimization. This will take some time..."")"
"0","#   time.xcmsSet <- system.time({ # measuring time"
"0","#   base::suppressWarnings("
"0","#         base::suppressMessages("
"0","#             resultPeakpicking <- optimizeXcmsSet(files =  samples_op, "
"0","#                                            params = peakpickingParameters, "
"0","#                                            nSlaves = 1, "
"0","#                                            subdir = NULL,"
"0","#                                            plot = TRUE)"
"0","#                            )"
"0","#                       )"
"0","# })"
"0","#   }"
"0","# resultPeakpicking "
"0","# }"
"0","default_peakpeaking_params <- lcms_default_peakpeaking_params(optimize = TRUE)"
"0","resultPeakpicking<- lcms_peakpicking_optimization(dataset_pos, "
"0","                                          default_peakpeaking_params,"
"0","                                          nSlaves = 1,"
"0","                                          output_dir_node3, plots = TRUE)"
"1","[1]"
"1"," ""Be aware: do not run twice using the same output directory"""
"1","
"
"1","[1]"
"1"," ""The algorithm is not able to rewrite files that are alreay in the directory"""
"1","
"
"1","[1]"
"1"," ""Saving filtered chromatogram..."""
"1","
"
"1","[1]"
"1"," ""Performing peak detection parameter optimization. This will take some time..."""
"1","
"
