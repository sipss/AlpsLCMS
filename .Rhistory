fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
path <- tempdir()
lcms_rearrange_datafiles_by_class(lcms_dataset = lcms_dataset,
dataDir = path)
x = list.files(path = paste(path, list.files(path = path),
sep = "/"), full.names = TRUE)
fileList <- x[grep(pattern =".mzXML$", x)]
fileList
library(pkgdown)
build_site()
library(NIHSlcms)
library(pkgdown)
build_site()
library(NIHSlcms)
build_site()
library(NIHSlcms)
build_site()
file_path <- system.file("extdata", "rearrange_mait", package = "NIHSlcms")
samples_mzxml <- list.files(file_path, recursive = TRUE, full.names = TRUE)
meta_path <- system.file("extdata", "metadata.xlsx", package = "NIHSlcms")
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
lcms_dataset <- suppressWarnings(lcms_read_samples(samples_mzxml, mode = "onDisk"))
library(NIHSlcms)
build_site()
file_path <- system.file("extdata", "rearrange_mait", package = "NIHSlcms")
samples_mzxml <- list.files(file_path, recursive = TRUE, full.names = TRUE)
meta_path <- system.file("extdata", "metadata.xlsx", package = "NIHSlcms")
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
lcms_dataset <- suppressWarnings(lcms_read_samples(samples_mzxml, mode = "onDisk"))
metadata <- lcms_meta_read(meta_path)
lcms_dataset_meta <- lcms_meta_add(lcms_dataset, metadata, by = "sampleNames")
peakdet <- lcms_findChromPeaks_cwp(lcms_dataset, params = lcms_preproc_params)
print(peakdet)
library(NIHSlcms)
build_site()
library(pkgdown)
build_site()
library(NIHSlcms)
build_site()
file_path <- system.file("extdata", "rearrange_mait", package = "NIHSlcms")
samples_mzxml <- list.files(file_path, recursive = TRUE, full.names = TRUE)
meta_path <- system.file("extdata", "metadata.xlsx", package = "NIHSlcms")
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
lcms_dataset <- suppressWarnings(lcms_read_samples(samples_mzxml, mode = "onDisk"))
metadata <- lcms_meta_read(meta_path)
lcms_dataset_meta <- lcms_meta_add(lcms_dataset, metadata, by = "sampleNames")
peakdet <- lcms_findChromPeaks_cwp(lcms_dataset, params = lcms_preproc_params)
print(peakdet)
saveRDS(peakdet, file = "peakdet.rds")
library(NIHSlcms)
build_site()
library(NIHSlcms)
build_site()
library(NIHSlcms)
library(pkgdown)
build_site()
library(NIHSlcms)
library(NIHSlcms)
build_site()
build_site()
library(NIHSlcms)
library(NIHSlcms)
library(NIHSlcms)
build_site()
library(pkgdown)
build_site()
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
library(NIHSlcms)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
file_name <-  system.file("extdata", "peak_table_imputed.rds", package = "NIHSlcms")
peak_table <- base::readRDS(file_name)
opt_result_path <-  system.file("extdata", package = "NIHSlcms")
lcms_preproc_params <- lcms_read_ipo_to_xcms(opt_result_path)
dataDir <-  system.file("extdata", "rearrange_mait", package = "NIHSlcms")
projectDir <-  system.file("extdata", package = "NIHSlcms")
project <- "project"
peak_table_MAIT <- lcms_to_MAIT(dataDir = dataDir,
projectDir = projectDir,
project = project,
preproc_params = lcms_preproc_params,
peakTable = peak_table)
print(peak_table_MAIT)
build_site()
library(pkgdown)
build_site()
library(NIHSlcms)
build_site()
library(NIHSlcms)
build_site()
opt_path <-  system.file("extdata", package = "NIHSlcms")
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
default_peakpicking_params <- lcms_default_peakpicking_params(optimize = TRUE)
resultPeakpicking <- lcms_peakpicking_optimization(lcms_dataset,
default_peakpicking_params,
opt_path = opt_path,
subdir = NULL)
## Not run:
opt_path <-  system.file("extdata", package = "NIHSlcms")
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
default_peakpicking_params <- lcms_default_peakpicking_params(optimize = TRUE)
filenames <- Biobase::pData(lcms_dataset)$sampleNames
filer <- filenames
former_dir <- getwd()
setwd(opt_path)
data_subset <- lcms_dataset %>% MSnbase::filterFile(file = filenames)
Biobase::fData(data_subset)$centroided <- TRUE
Biobase::fData(data_subset)$peaksCount <- Biobase::fData(data_subset)$originalPeaksCount
mzxml_in_opt_path <- lcms_list_mzxml_samples(opt_path, file_format = "mzXML",
rawconverter_path = NULL)
mzxml_in_opt_path
file_names_opt_path <- stringr::str_c(stringr::str_match(mzxml_in_opt_path,"\\w+\\.mzXML$"))
file_names_opt_path
num_mzxml_opt_path <- length(file_names_opt_path)
num_mzxml_opt_path
file_names_union <- union(file_names_opt_path, filer)
file_names_union
aux_file_names_union <- stringr::str_c(file_names_union,collapse = " ")
aux_file_names_union
cat(stringr::str_c("Samples used for optimization:",
"\n", "\t", aux_file_names_union,"\n", collapse =" "))
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
peakpickingParameters <- default_peakpicking_params
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
nSlaves <-1
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
plots = TRUE
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
subdir = NULL
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
plots= FALSE
time.xcmsSet <- system.time({ # measuring time
base::suppressWarnings(
base::suppressMessages(
resultPeakpicking <- IPO::optimizeXcmsSet(files =  opt_path,
params = peakpickingParameters,
nSlaves = nSlaves,
subdir = subdir,
plot = plots)
)
)
})
opt_path
detach("package:NIHSlcms", unload = TRUE)
library(NIHSlcms)
library(NIHSlcms)
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
default_peakpicking_params <- lcms_default_peakpicking_params(optimize = TRUE)
resultPeakpicking <- lcms_peakpicking_optimization(lcms_dataset,
default_peakpicking_params,
opt_path = opt_path,
subdir = NULL)
opt_path <-  system.file("extdata", package = "NIHSlcms")
file_name <- system.file("extdata", "lcms_dataset_rt_pos_rs.rds", package = "NIHSlcms")
lcms_dataset <- lcms_dataset_load(file_name)
default_peakpicking_params <- lcms_default_peakpicking_params(optimize = TRUE)
resultPeakpicking <- lcms_peakpicking_optimization(lcms_dataset,
default_peakpicking_params,
opt_path = opt_path,
subdir = NULL)
